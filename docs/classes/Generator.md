[ts-sql-codegen](../README.md) / [Exports](../modules.md) / Generator

# Class: Generator

Generator class for programmatic codegen.

Most common usage involves creating an instance and calling generate function:

```ts
const options = {
   schemaPath: './schema.yaml',
   connectionSourcePath: './connection-source.ts'
}
const generator = new Generator(options);
await generator.generate();
```

See [GeneratorOpts](./GeneratorOpts.md) for configuration options.

For advanced use-cases, you can extend this class.
This enables you to use custom templates, pre/post processing of generated code
and custom logic for table/column/field mapping.

## Table of contents

### Constructors

- [constructor](Generator.md#constructor)

### Properties

- [engine](Generator.md#engine)
- [fieldTypeMappings](Generator.md#fieldtypemappings)
- [getFieldTypeMappings](Generator.md#getfieldtypemappings)
- [getParsedTemplate](Generator.md#getparsedtemplate)
- [getTemplatePath](Generator.md#gettemplatepath)
- [opts](Generator.md#opts)

### Methods

- [extractPrimaryKey](Generator.md#extractprimarykey)
- [generate](Generator.md#generate)
- [generateTableMapper](Generator.md#generatetablemapper)
- [getClassNameFromTableName](Generator.md#getclassnamefromtablename)
- [getConnectionSourceImportPath](Generator.md#getconnectionsourceimportpath)
- [getFieldNameForColumn](Generator.md#getfieldnameforcolumn)
- [getFieldType](Generator.md#getfieldtype)
- [getOutputFileName](Generator.md#getoutputfilename)
- [getOutputFilePath](Generator.md#getoutputfilepath)
- [postProcessOutput](Generator.md#postprocessoutput)
- [preProcessTemplateInput](Generator.md#preprocesstemplateinput)

## Constructors

### constructor

• **new Generator**(`opts`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `opts` | [`GeneratorOpts`](../interfaces/GeneratorOpts.md) |

#### Defined in

[generator.ts:41](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L41)

## Properties

### engine

• `Protected` **engine**: `Liquid`

#### Defined in

[generator.ts:37](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L37)

___

### fieldTypeMappings

• `Protected` **fieldTypeMappings**: readonly `FieldTypeMapping`[] = `fieldTypeMappings`

#### Defined in

[generator.ts:38](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L38)

___

### getFieldTypeMappings

• `Protected` **getFieldTypeMappings**: () => { `columnName`: `undefined` \| ``null`` \| `string` \| `RegExp` ; `columnType`: `undefined` \| ``null`` \| `string` \| `RegExp` ; `fieldType`: `string` ; `tableName`: `undefined` \| ``null`` \| `string` \| `RegExp`  }[] & `MemoizedFunction`

#### Defined in

[generator.ts:45](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L45)

___

### getParsedTemplate

• `Protected` **getParsedTemplate**: () => `Promise`<`Template`[]\> & `MemoizedFunction`

#### Defined in

[generator.ts:53](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L53)

___

### getTemplatePath

• `Protected` **getTemplatePath**: () => `string` & `MemoizedFunction`

#### Defined in

[generator.ts:49](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L49)

___

### opts

• `Protected` **opts**: [`GeneratorOpts`](../interfaces/GeneratorOpts.md)

#### Defined in

[generator.ts:39](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L39)

## Methods

### extractPrimaryKey

▸ `Protected` **extractPrimaryKey**(`table`, `fields`): `undefined` \| { `columnName`: `string` ; `columnType`: `string` ; `isAutoGenerated`: `boolean` ; `name`: `string`  }

#### Parameters

| Name | Type |
| :------ | :------ |
| `table` | `Object` |
| `table.columns` | { nullable?: boolean \| undefined; default?: any; comment?: string \| null \| undefined; type: string; name: string; }[] |
| `table.constraints` | { comment?: string \| null \| undefined; referencedTable?: string \| null \| undefined; referencedColumns?: string[] \| null \| undefined; type: string; name: string; table: string; columns: string[]; }[] |
| `table.name` | `string` |
| `table.type` | `string` |
| `fields` | `FieldTmplInput`[] |

#### Returns

`undefined` \| { `columnName`: `string` ; `columnType`: `string` ; `isAutoGenerated`: `boolean` ; `name`: `string`  }

#### Defined in

[generator.ts:150](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L150)

___

### generate

▸ **generate**(): `Promise`<`void`\>

#### Returns

`Promise`<`void`\>

#### Defined in

[generator.ts:58](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L58)

___

### generateTableMapper

▸ **generateTableMapper**(`table`): `Promise`<`void`\>

#### Parameters

| Name | Type |
| :------ | :------ |
| `table` | `Object` |
| `table.columns` | { nullable?: boolean \| undefined; default?: any; comment?: string \| null \| undefined; type: string; name: string; }[] |
| `table.constraints` | { comment?: string \| null \| undefined; referencedTable?: string \| null \| undefined; referencedColumns?: string[] \| null \| undefined; type: string; name: string; table: string; columns: string[]; }[] |
| `table.name` | `string` |
| `table.type` | `string` |

#### Returns

`Promise`<`void`\>

#### Defined in

[generator.ts:71](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L71)

___

### getClassNameFromTableName

▸ `Protected` **getClassNameFromTableName**(`tableName`): `string`

#### Parameters

| Name | Type |
| :------ | :------ |
| `tableName` | `string` |

#### Returns

`string`

#### Defined in

[generator.ts:123](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L123)

___

### getConnectionSourceImportPath

▸ `Protected` **getConnectionSourceImportPath**(`outputFilePath`): `string`

#### Parameters

| Name | Type |
| :------ | :------ |
| `outputFilePath` | `string` |

#### Returns

`string`

#### Defined in

[generator.ts:104](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L104)

___

### getFieldNameForColumn

▸ `Protected` **getFieldNameForColumn**(`col`): `string`

#### Parameters

| Name | Type |
| :------ | :------ |
| `col` | `Object` |
| `col.comment` | `undefined` \| ``null`` \| `string` |
| `col.default` | `any` |
| `col.name` | `string` |
| `col.nullable` | `undefined` \| `boolean` |
| `col.type` | `string` |

#### Returns

`string`

#### Defined in

[generator.ts:127](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L127)

___

### getFieldType

▸ `Protected` **getFieldType**(`tableName`, `col`): `string`

#### Parameters

| Name | Type |
| :------ | :------ |
| `tableName` | `string` |
| `col` | `Object` |
| `col.comment` | `undefined` \| ``null`` \| `string` |
| `col.default` | `any` |
| `col.name` | `string` |
| `col.nullable` | `undefined` \| `boolean` |
| `col.type` | `string` |

#### Returns

`string`

#### Defined in

[generator.ts:131](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L131)

___

### getOutputFileName

▸ `Protected` **getOutputFileName**(`table`): `string`

#### Parameters

| Name | Type |
| :------ | :------ |
| `table` | `Object` |
| `table.columns` | { nullable?: boolean \| undefined; default?: any; comment?: string \| null \| undefined; type: string; name: string; }[] |
| `table.constraints` | { comment?: string \| null \| undefined; referencedTable?: string \| null \| undefined; referencedColumns?: string[] \| null \| undefined; type: string; name: string; table: string; columns: string[]; }[] |
| `table.name` | `string` |
| `table.type` | `string` |

#### Returns

`string`

#### Defined in

[generator.ts:146](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L146)

___

### getOutputFilePath

▸ `Protected` **getOutputFilePath**(`table`): `string`

#### Parameters

| Name | Type |
| :------ | :------ |
| `table` | `Object` |
| `table.columns` | { nullable?: boolean \| undefined; default?: any; comment?: string \| null \| undefined; type: string; name: string; }[] |
| `table.constraints` | { comment?: string \| null \| undefined; referencedTable?: string \| null \| undefined; referencedColumns?: string[] \| null \| undefined; type: string; name: string; table: string; columns: string[]; }[] |
| `table.name` | `string` |
| `table.type` | `string` |

#### Returns

`string`

#### Defined in

[generator.ts:141](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L141)

___

### postProcessOutput

▸ `Protected` **postProcessOutput**(`output`, `_table`): `Promise`<`string`\>

#### Parameters

| Name | Type |
| :------ | :------ |
| `output` | `string` |
| `_table` | `Object` |
| `_table.columns` | { nullable?: boolean \| undefined; default?: any; comment?: string \| null \| undefined; type: string; name: string; }[] |
| `_table.constraints` | { comment?: string \| null \| undefined; referencedTable?: string \| null \| undefined; referencedColumns?: string[] \| null \| undefined; type: string; name: string; table: string; columns: string[]; }[] |
| `_table.name` | `string` |
| `_table.type` | `string` |

#### Returns

`Promise`<`string`\>

#### Defined in

[generator.ts:119](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L119)

___

### preProcessTemplateInput

▸ `Protected` **preProcessTemplateInput**(`input`): `Promise`<`any`\>

#### Parameters

| Name | Type |
| :------ | :------ |
| `input` | `any` |

#### Returns

`Promise`<`any`\>

#### Defined in

[generator.ts:115](https://github.com/lorefnon/ts-sql-codegen/blob/c86b980/src/generator.ts#L115)
